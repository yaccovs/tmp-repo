<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מקלדת חצי-חצי משולבת</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            margin: 0; 
            background-color: #f0f0f0; 
            overflow: hidden; /* למניעת גלילה בגלל גודל פונט */
        }

        #output { 
            font-size: 3rem; 
            margin-bottom: 20px; 
            height: 1.5em; 
            border-bottom: 2px solid #333; 
            min-width: 300px; 
            text-align: center; 
            background: white; 
            padding: 10px; 
            border-radius: 10px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .container { 
            display: flex; 
            width: 95%; 
            height: 70vh; /* הגדלתי את גובה הכפתורים */
            gap: 15px; 
        }

        .half-btn { 
            flex: 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            border: none; 
            border-radius: 15px; 
            transition: transform 0.1s, background-color 0.3s; 
            color: white; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            padding: 10px;
            overflow: hidden;
        }

        .right { background-color: #4CAF50; }
        .left { background-color: #2196F3; }
        
        .half-btn:active { transform: scale(0.98); }

        /* עיצוב הטקסט בתוך הכפתורים */
        .letters-display { 
            font-size: clamp(1.5rem, 4vw, 3.5rem); 
            font-weight: bold;
            text-align: center;
            line-height: 1.4;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            width: 100%;
        }

        /* עיצוב מיוחד לפעולות כדי שיבלטו בתוך רשימת האותיות */
        .action-item {
            color: #FFEB3B; /* צהוב */
            text-shadow: 1px 1px 2px black;
            font-weight: 900;
        }

        .reset-btn { 
            margin-top: 20px; 
            padding: 10px 20px; 
            font-size: 1rem; 
            cursor: pointer; 
            border-radius: 5px; 
            border: none; 
            background: #607D8B; 
            color: white; 
            opacity: 0.7;
        }
    </style>
</head>
<body>

    <div id="output"></div>

    <div class="container">
        <button id="btnRight" class="half-btn right" onclick="chooseHalf(0)">
            <div id="displayRight" class="letters-display"></div>
        </button>
        <button id="btnLeft" class="half-btn left" onclick="chooseHalf(1)">
            <div id="displayLeft" class="letters-display"></div>
        </button>
    </div>

    <button class="reset-btn" onclick="resetSearch()">התחל אות חדשה (איפוס)</button>

    <script>
        // האותיות + הפעולות כחלק אינטגרלי מהרשימה
        const baseItems = ["א", "ב", "ג", "ד", "ה", "ו", "ז", "ח", "ט", "י", "כ", "ל", "מ", "נ", "ס", "ע", "פ", "צ", "ק", "ר", "ש", "ת", "רווח", "מחק"];
        
        const sofitMap = {
            'מ': 'ם',
            'נ': 'ן',
            'צ': 'ץ',
            'פ': 'ף',
            'כ': 'ך'
        };

        let currentRange = [...baseItems];

        // פונקציה שמייצרת HTML כדי להבליט את המילים רווח ומחק
        function formatList(list) {
            return list.map(item => {
                if (item === "רווח" || item === "מחק") {
                    return `<span class="action-item">${item}</span>`;
                }
                return item;
            }).join(' ');
        }

        function updateDisplay() {
            const mid = Math.ceil(currentRange.length / 2);
            const rightHalf = currentRange.slice(0, mid);
            const leftHalf = currentRange.slice(mid);

            // שימוש ב-innerHTML כדי לאפשר עיצוב שונה לרווח ומחק
            document.getElementById('displayRight').innerHTML = formatList(rightHalf);
            document.getElementById('displayLeft').innerHTML = formatList(leftHalf);

            // בדיקה אם נשאר פריט אחד בלבד
            if (currentRange.length === 1) {
                handleSelection(currentRange[0]);
            }
        }

        function handleSelection(item) {
            const output = document.getElementById('output');
            
            if (item === "מחק") {
                // לוגיקת מחיקה
                output.innerText = output.innerText.slice(0, -1);
            } 
            else if (item === "רווח") {
                // לוגיקת רווח + מנצפ"ך
                let text = output.innerText;
                if (text.length > 0) {
                    const lastChar = text[text.length - 1];
                    if (sofitMap[lastChar]) {
                        text = text.slice(0, -1) + sofitMap[lastChar];
                    }
                }
                output.innerText = text + " ";
            } 
            else {
                // הוספת אות רגילה
                output.innerText += item;
            }

            // איפוס אוטומטי מהיר
            setTimeout(resetSearch, 200);
        }

        function chooseHalf(index) {
            const mid = Math.ceil(currentRange.length / 2);
            if (index === 0) {
                currentRange = currentRange.slice(0, mid);
            } else {
                currentRange = currentRange.slice(mid);
            }
            updateDisplay();
        }

        function resetSearch() {
            currentRange = [...baseItems];
            updateDisplay();
        }

        updateDisplay();
    </script>
</body>
</html>
